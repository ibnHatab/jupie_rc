
#+STARTUP: showeverything
#+TITLE: Mini Jupiter RC-Car



* Platform
** Actuators

*** Orientation
	- ros-driver_mpu9250
	- ros-calibration_imu
	- imu_filter_madgwick

*** Calibration
	Magnetometer, Timisoara
	: rosrun calibration_imu magnetometer
	- total field strength, in nT: 48735.3 nT
	  #+begin_example
calibration units: tesla (T)

 1.0704277446 -0.0554687100 -0.0751259770 -0.0001229154
-0.0554687100  0.9700723220  0.0656101161 -0.0002405948
-0.0751259770  0.0656101161  0.8717398362 -0.0001045596
 0.0000000000  0.0000000000  0.0000000000  1.0000000000

	  #+end_example
	Accelerometer
	#+begin_example
calibration units: m/s^2

 1.000546  0.000000  0.000000 -0.249843
 0.000000  0.997507  0.000000 -0.155362
 0.000000  0.000000  0.982808  0.067903
 0.000000  0.000000  0.000000  1.000000
	#+end_example

** Dynamic frame

** Launch
*** Host
	: roslaunch imu_filter_madgwick imu_filter_madgwick.launch

*** jupie_rc ROS master
	: export ROS_MASTER_URI=http://user:11311/
	: roslaunch jupie jupie_rc.launch publish_raw:=false

** Arduino ECU
   Development Board Arduino Nano Compatible (ATmega328p + CH340)
   hadles motor and direction servo PWM and rotary encoder.
   It use old bootloader compatible with arduino:avr:pro BSP.

*** Interface
   - add rosserial module
	 : git clone https://github.com/ros-drivers/rosserial.git
   - generate library bindings and messages
     : rosrun rosserial_arduino make_libraries.py ~/Arduino/libraries/

   - compile and upload sketch file with arduino/Makefile
	 : arduino-cli sketch new hello_node
	 : make SRC=hello_node/ build
	 Stop serial node and upload firmware
	 : make SRC=hello_node/ upload
	 Start serial node and test
	 : rostopic echo /chatter

* REFERENCES
  - [1] Development of a mechatronical platform for AUTOSAR
    The ball-balancing robot Master of Science Thesis, ANDRÃ‰ ALSTRIN, EMIL SUNDELL
	https://publications.lib.chalmers.se/records/fulltext/225052/225052.pdf

* TODO FIXES [0/4]
  - [ ] recalibrate gravitometer
  - [ ] move filter to RC
  - [ ] Launches main modules for work in autonomous mode
  - [ ] the base controller, uses dwa_local_planner (by default included in launch)
  - [ ] sphinx documentation reindexing ref. [1]
